DROP TABLE Season_off_stats;
DROP TABLE Season_def_stats;
DROP TABLE Coaches;
DROP TABLE Stadiums;
DROP TABLE Games;
DROP TABLE Team_season;
DROP TABLE Yearly_awards;
DROP TABLE Players;
DROP TABLE Team;
DROP TABLE League;

CREATE TABLE League (
    League_ID int(3),
    League_name varchar(20),
    Num_of_teams int,
    PRIMARY KEY (League_ID)
);


CREATE TABLE Team (
    Team_ID int(4) NOT NULL,
    City varchar(20),
    Team_name varchar(20),
    League_ID int(3) NOT NULL,
    FOREIGN KEY (League_ID) REFERENCES League (League_ID) ON UPDATE CASCADE ON DELETE CASCADE,
    PRIMARY KEY (Team_ID)
);

CREATE TABLE Team_season (
    Team_ID int(4) NOT NULL,
    Season_year int,
    wins int,
    losses int,
    ties int,
    PRIMARY KEY (Team_ID, Season_year),
    FOREIGN KEY (Team_ID) REFERENCES Team (Team_ID) ON UPDATE CASCADE ON DELETE CASCADE,
    CHECK (Season_year IN ('2022','2021','2020','2019')),
    CHECK (wins<=20 AND losses<=20)
);

CREATE TABLE Players (
    Player_ID int(5) NOT NULL,
    Team_ID int(4) NOT NULL,
    Player_name varchar(25),
    Position varchar(2) NOT NULL,
    Age int(2),
    Years_played int,
    PRIMARY KEY (Player_ID),
    FOREIGN KEY (Team_ID) REFERENCES Team (Team_ID) ON UPDATE CASCADE ON DELETE CASCADE,
    CHECK (Position IN ('QB','HB','WR','TE','DL','LB','DB'))
);

CREATE TABLE Coaches (
    Coach_ID int(5) NOT NULL,
    Team_ID int(4),
    Coach_name varchar(20),
    Career_wins int DEFAULT 0,
    Career_losses int DEFAULT 0,
    Hire_date date,
    PRIMARY KEY (Coach_ID),
    FOREIGN KEY (Team_ID) REFERENCES Team (Team_ID) ON UPDATE CASCADE ON DELETE CASCADE

);

CREATE TABLE Games (
    Game_ID int(2),
    Team1_ID int(4),
    Team2_ID int(4),
    Team1_points int DEFAULT 0,
    Team2_points int DEFAULT 0,
    winner int(4) DEFAULT 0000,
    game_date date,
    PRIMARY KEY (Game_ID),
    FOREIGN KEY (Team1_ID) REFERENCES Team(Team_ID) ON UPDATE CASCADE ON DELETE CASCADE,
    FOREIGN KEY (Team2_ID) REFERENCES Team(Team_ID) ON UPDATE CASCADE ON DELETE CASCADE,
    FOREIGN KEY (winner) REFERENCES Team(Team_ID) ON UPDATE CASCADE ON DELETE CASCADE,
    CHECK (Team1_points < 100),
    CHECK (Team2_points < 100)
);

CREATE TABLE Yearly_awards (
    Award_ID int(3),
    League_ID int(3),
    League_MVP int(5) NOT NULL,
    League_Champion int(4) NOT NULL,
    Season_year int(4),
    PRIMARY KEY (Award_ID),
    FOREIGN KEY (League_MVP) REFERENCES Players (Player_ID) ON UPDATE CASCADE ON DELETE CASCADE,
    FOREIGN KEY (League_Champion) REFERENCES Team (Team_ID) ON UPDATE CASCADE ON DELETE CASCADE,
    FOREIGN KEY (League_ID) REFERENCES League (League_ID) ON UPDATE CASCADE ON DELETE CASCADE,
    CHECK (Season_year IN ('2022','2021','2020','2019'))
);

CREATE TABLE Stadiums (
    Stadium_ID int(3),
    Team_ID int(4),
    Capacity int,
    Stadium_name varchar(20),
    PRIMARY KEY (Stadium_ID),
    FOREIGN KEY (Team_ID) REFERENCES Team (Team_ID) ON UPDATE CASCADE ON DELETE CASCADE
);


CREATE TABLE Season_off_stats (
    Player_ID int(5),
    Team_ID int(4),
    Pass_yards int DEFAULT 0,
    Rush_yards int DEFAULT 0,
    Recieving_yards int DEFAULT 0,
    Total_yards int DEFAULT 0,
    Total_TDs int DEFAULT 0,
    stat_year int,
    PRIMARY KEY (Player_ID, Team_ID, stat_year),
    FOREIGN KEY (Player_ID) REFERENCES Players (Player_ID) ON UPDATE CASCADE ON DELETE CASCADE,
    FOREIGN KEY (Team_ID) REFERENCES Team (Team_ID) ON UPDATE CASCADE ON DELETE CASCADE,
    CHECK (stat_year IN ('2022','2021','2020','2019'))

);

CREATE TABLE Season_def_stats (
    Player_ID int(5),
    Team_ID int(3),
    Tackles int DEFAULT 0,
    Sacks int DEFAULT 0,
    Takeaways int DEFAULT 0,
    Def_TDs int DEFAULT 0,
    stat_year int,
    PRIMARY KEY (Player_ID, Team_ID, stat_year),
    FOREIGN KEY (Player_ID) REFERENCES Players (Player_ID) ON UPDATE CASCADE ON DELETE CASCADE,
    FOREIGN KEY (Team_ID) REFERENCES Team (Team_ID) ON UPDATE CASCADE ON DELETE CASCADE,
    CHECK (stat_year IN ('2022','2021','2020','2019'))
);

-- Insert League 
INSERT INTO League VALUES (001, "West", 4);
INSERT INTO League VALUES (002, "East", 4);

-- Insert Teams
INSERT INTO Team VALUES (0001, "San Francisco", "49ers", 001);
INSERT INTO Team VALUES (0002, "Los Angeles", "Rams", 001);
INSERT INTO Team VALUES (0003, "Arizona", "Cardinals", 001);
INSERT INTO Team VALUES (0004, "Seattle", "Seahawks", 001);

INSERT INTO Team VALUES (0005, "Miami", "Dolphins",002);
INSERT INTO Team VALUES (0006, "Detroit", "Lions",002);
INSERT INTO Team VALUES (0007, "Cleveland","Browns",002);
INSERT INTO Team VALUES (0008, "Houston","Texans",002);

-- Insert Players
INSERT INTO Players VALUES (10001, 0001,"Jimmy Garoppolo","QB",30,8);
INSERT INTO Players VALUES (10002, 0001,"George Kittle","TE",28,5);
INSERT INTO Players VALUES (10003, 0001,"Deebo Samuel","WR",25,3);
INSERT INTO Players VALUES (10004, 0001, "Nick Bosa","DL",24,3);
INSERT INTO Players VALUES (10005, 0001, "Fred Warner","LB",25,4);

INSERT INTO Players VALUES (20001, 0002, "Matthew Stafford","QB",33,13);
INSERT INTO Players VALUES (20002, 0002, "Cooper Kupp","WR",28,5);
INSERT INTO Players VALUES (20003, 0002, "Odell Beckham JR","WR",29,8);

INSERT INTO Players VALUES (30001,0003, "Kyler Murray","QB",24,3);
INSERT INTO Players VALUES (30002,0003, "Deandre Hopkins","WR",29,7);
INSERT INTO Players VALUES (30003,0003, "JJ Watt","DL",32, 11);

INSERT INTO Players VALUES (40001, 0004, "Russell Wilson","QB",33,10);
INSERT INTO Players VALUES (40002, 0004, "Bobby Wagner","LB",31,10);
INSERT INTO Players VALUES (40003, 0004, "DK Metcalf","WR",24,3);

INSERT INTO Players VALUES (50001,0005, "Tua Tagovailoa","QB",23,2);
INSERT INTO Players VALUES (50002,0005, "Xavien Howard","DB",28,6);
INSERT INTO Players VALUES (50003,0005, "Mike Gesicki","TE",26,4);

INSERT INTO Players VALUES (60001, 0006, "Jared Goff","QB",27,6);

INSERT INTO Players VALUES (70001, 0007, "Baker Mayfield","QB",26,4);
INSERT INTO Players VALUES (70002, 0007, "Jarvis Landry","WR",29,8);

INSERT INTO Players VALUES (80001,0008, "Brandin Cooks","WR",28,8);
INSERT INTO Players VALUES (80002,0008,"Davis Mills","QB",23,1);


-- Insert Coaches
INSERT INTO Coaches VALUES (10000, 0001, "Kyle Shannahan", 39,42,'2017-02-06');
INSERT INTO Coaches VALUES (20000, 0002, "Sean McVay", 55,26, '2017-01-16');
INSERT INTO Coaches VALUES (30000, 0003, "Kliff Kingsbury", 24, 24, "2019-1-8");
INSERT INTO Coaches VALUES (40000, 0004, "Pete Carroll", 119, 73, "2010-1-8");
INSERT INTO Coaches VALUES (50000, 0005, "Brian Flores", 24, 25, "2019-2-4:");
INSERT INTO Coaches VALUES (60000, 0006, "Dan Cambell", 3, 13, "2021-1-20");
INSERT INTO Coaches VALUES (70000, 0007, "Kevin Stefanski", 19, 14, "2020-1-19");
INSERT INTO Coaches VALUES (80000, 0008, "David Culley",4,13,"2021-2-1");

-- Insert Stats
INSERT INTO Season_off_stats VALUES (10001,0001,3978,62,0,4040,28,2019);
INSERT INTO Season_off_stats VALUES (10001,0001,1096,25,0,1121,7,2020);
INSERT INTO Season_off_stats VALUES (10001,0001,3810,51,0,3861,23,2021);

INSERT INTO Season_off_stats VALUES (10002,0001,0,22,1053,1075,5,2019);
INSERT INTO Season_off_stats VALUES (10002,0001,0,17,634,651,2,2020);
INSERT INTO Season_off_stats VALUES (10002,0001,0,20,910,930,6,2021);

INSERT INTO Season_off_stats VALUES (10003,0001,0,159,802,961,6,2019);
INSERT INTO Season_off_stats VALUES (10003,0001,0,26,391,417,1,2020);
INSERT INTO Season_off_stats VALUES (10003,0001,32,1405,365,1802,14,2021);

INSERT INTO Season_def_stats VALUES (10004,0001,32,9,2,0,2019);
INSERT INTO Season_def_stats VALUES (10004,0001,3,0,0,0,2020);
INSERT INTO Season_def_stats VALUES (10004,0001,40,16,4,0,2021);

INSERT INTO Season_def_stats VALUES (10005,0001,89,3,1,1,2019);
INSERT INTO Season_def_stats VALUES (10005,0001,79,1,2,0,2020);
INSERT INTO Season_def_stats VALUES (10005,0001,79,1,3,0,2021);

INSERT INTO Season_off_stats VALUES (20001,0002,4886,43,0,4929,41,2021);
INSERT INTO Season_off_stats VALUES (20001,0006,4084,112,0,2561,26,2020);
INSERT INTO Season_off_stats VALUES (20001,0006,2499,62,0,4186,19,2019);

INSERT INTO Season_off_stats VALUES (20002,0002,0,4,1161,1165,10,2019);
INSERT INTO Season_off_stats VALUES (20002,0002,0,33,974,1007,3,2020);
INSERT INTO Season_off_stats VALUES (20002,0002,0,18,1947,1955,16,2021);

INSERT INTO Season_off_stats VALUES (20003,0007,20,10,1035,1065,4,2019);
INSERT INTO Season_off_stats VALUES (20003,0007,18,72,319,409,4,2020);
INSERT INTO Season_off_stats VALUES (20003,0002,0,0,537,537,5,2021);

INSERT INTO Season_off_stats VALUES (30001,0003,3722,544,0,4266,24,2019);
INSERT INTO Season_off_stats VALUES (30001,0003,3971,819,0,4790,37,2020);
INSERT INTO Season_off_stats VALUES (30001,0003,3787,423,0,4210,29,2021);

INSERT INTO Season_off_stats VALUES (30002,0003,0,0,1407,1407,6,2020);
INSERT INTO Season_off_stats VALUES (30002,0003,0,0,572,572,8,2021);
INSERT INTO Season_off_stats VALUES (30002,0008,0,0,1165,1165,7,2019);

INSERT INTO Season_def_stats VALUES (30003,0003,10,1,0,0,2021);
INSERT INTO Season_def_stats VALUES (30003,0008,47,16,2,0,2019);
INSERT INTO Season_def_stats VALUES (30003,0008,36,5,2,1,2020);

INSERT INTO Season_off_stats VALUES (40001,0004,4110,342,0,4452,34,2019);
INSERT INTO Season_off_stats VALUES (40001,0004,4212,513,0,4725,42,2020);
INSERT INTO Season_off_stats VALUES (40001,0004,3113,183,0,3296,27,2021);

INSERT INTO Season_off_stats VALUES (40003,0004,0,11,900,911,7,2019);
INSERT INTO Season_off_stats VALUES (40003,0004,0,0,1303,1303,10,2020);
INSERT INTO Season_off_stats VALUES (40003,0004,0,6,967,973,12,2021);

INSERT INTO Season_def_stats VALUES (40002,0004,86,3,2,0,2019);
INSERT INTO Season_def_stats VALUES (40002,0004,81,3,1,0,2020);
INSERT INTO Season_def_stats VALUES (40002,0004,89,1,1,0,2021);

INSERT INTO Season_off_stats VALUES (50001,0005,1814,109,0,1923,14,2020);
INSERT INTO Season_off_stats VALUES (50001,0005,2653,128,0,2781,19,2021);

INSERT INTO Season_def_stats VALUES (50002,0005,12,0,1,0,2019);
INSERT INTO Season_def_stats VALUES (50002,0005,20,0,11,0,2020);
INSERT INTO Season_def_stats VALUES (50002,0005,39,1,7,0,2021);

INSERT INTO Season_off_stats VALUES (50003,0005,0,133,51,184,1,2019);
INSERT INTO Season_off_stats VALUES (50003,0005,0,584,388,972,5,2020);
INSERT INTO Season_off_stats VALUES (50003,0005,0,612,234,846,7,2021);

INSERT INTO Season_off_stats VALUES (60001,002,4638,40,0,4678,22,2019);
INSERT INTO Season_off_stats VALUES (60001,002,3952,99,0,4051,20,2020);
INSERT INTO Season_off_stats VALUES (60001,006,3245,87,0,3332,19,2021);

INSERT INTO Season_off_stats VALUES (70001,007,3827,141,0,3969,25,2019);
INSERT INTO Season_off_stats VALUES (70001,007,3563,165,0,3728,27,2020);
INSERT INTO Season_off_stats VALUES (70001,007,3010,134,0,3144,18,2021);

INSERT INTO Season_off_stats VALUES (70002,005,0,10,1174,1184,7,2019);
INSERT INTO Season_off_stats VALUES (70002,007,0,10,840,850,7,2020);
INSERT INTO Season_off_stats VALUES (70002,007,0,40,570,610,4,2021);

INSERT INTO Season_off_stats VALUES (80001,002,0,0,583,583,2,2019);
INSERT INTO Season_off_stats VALUES (80001,008,0,0,1150,1150,6,2020);
INSERT INTO Season_off_stats VALUES (80001,008,0,0,1037,1037,6,2021);

INSERT INTO Season_off_stats VALUES (80002,008,2664,44,0,2708,16,2021);

-- Insert Seasons
INSERT INTO Team_season VALUES (0001,2021,10,7,0);
INSERT INTO Team_season VALUES (0001,2020,6,10,0);
INSERT INTO Team_season VALUES (0001,2019,13,3,0);

INSERT INTO Team_season VALUES (0002,2021,12,5,0);
INSERT INTO Team_season VALUES (0002,2020,10,6,0);
INSERT INTO Team_season VALUES (0002,2019,9,7,0);

INSERT INTO Team_season VALUES (0003,2021,11,6,0);
INSERT INTO Team_season VALUES (0003,2020,8,8,0);
INSERT INTO Team_season VALUES (0003,2019,5,10,1);

INSERT INTO Team_season VALUES (0004,2021,7,10,0);
INSERT INTO Team_season VALUES (0004,2020,12,4,0);
INSERT INTO Team_season VALUES (0004,2019,11,5,0);

INSERT INTO Team_season VALUES (0005,2021,9,8,0);
INSERT INTO Team_season VALUES (0005,2020,10,6,0);
INSERT INTO Team_season VALUES (0005,2019,5,11,0);

INSERT INTO Team_season VALUES (0006,2021,3,13,1);
INSERT INTO Team_season VALUES (0006,2020,5,11,0);
INSERT INTO Team_season VALUES (0006,2019,3,12,1);

INSERT INTO Team_season VALUES (0007,2021,8,9,0);
INSERT INTO Team_season VALUES (0007,2020,11,5,0);
INSERT INTO Team_season VALUES (0007,2019,6,10,0);

INSERT INTO Team_season VALUES (0008,2021,4,13,0);
INSERT INTO Team_season VALUES (0008,2020,4,12,0);
INSERT INTO Team_season VALUES (0008,2019,10,6,0);

-- Insert Games (gameID, team1, team2, team1 points, team2 points, winner, date)
INSERT INTO Games VALUES (01,0001,0003,10,17,0003,'2021-9-12');
INSERT INTO Games VALUES (02,0001,0002,31,10,0001,'2021-11-15');
INSERT INTO Games VALUES (03,0001,0004,21,28,0004,'2021-10-3');
INSERT INTO Games VALUES (04,0001,0006,41,33,0001,'2021-9-12');

INSERT INTO Games VALUES (05,0002,0003,20,37,0003,'2021-10-3');
INSERT INTO Games VALUES (06,0002,0004,26,17,0002,'2021-10-7');
INSERT INTO Games VALUES (07,0002,0008,38,22,0002,'2021-10-31');

INSERT INTO Games VALUES (08,0003,0007,37,14,0003,'2021-10-17');
INSERT INTO Games VALUES (09,0003,0006,12,30,0006,'2021-12-19');
INSERT INTO Games VALUES (10,0003,0004,30,38,0005,'2022-1-9');

INSERT INTO Games VALUES (11,0004,0008,33,13,0004,'2021-12-12');
INSERT INTO Games VALUES (12,0004,0002,10,20,0002,'2021-12-21');
INSERT INTO Games VALUES (13,0004,0006,51,29,0004,'2022-1-2');

INSERT INTO Games VALUES (14,0005,0008,17,9,0005,'2021-12-7');
INSERT INTO Games VALUES (15,0005,0007,23,20,0007,'2021-9-12');
INSERT INTO Games VALUES (16,0005,0002,10,31,0002,'2021-9-19');

INSERT INTO Games VALUES (17,0006,0008,30,24,0006,'2021-9-20');
INSERT INTO Games VALUES (18,0006,0005,10,28,0005,'2021-10-3');
INSERT INTO Games VALUES (19,0006,0007,17,28,0007,'2021-12-25');

INSERT INTO Games VALUES (20,0007,0008,31,21,0007,'2021-9-19');
INSERT INTO Games VALUES (21,0007,0004,26,6,0007,'2021-9-12');
INSERT INTO Games VALUES (22,0007,0002,22,24,0002,'2021-12-25');

INSERT INTO Games VALUES (23,0008,0003,5,31,0003,'2021-10-24');
INSERT INTO Games VALUES (24,0008,0001,7,23,0001,'2022-1-2');

-- Insert Stadiums
INSERT INTO Stadiums VALUES (001,0001,68500,"Levi's Stadium");
INSERT INTO Stadiums VALUES (002,0002,70240,"SoFi Stadium");
INSERT INTO Stadiums VALUES (003,0003,63400,"State Farm Stadium");
INSERT INTO Stadiums VALUES (004,0004,68740,"Lumen Field");
INSERT INTO Stadiums VALUES (005,0005,64767,"Hard Rock Stadium");
INSERT INTO Stadiums VALUES (006,0006,65000,"Ford Field");
INSERT INTO Stadiums VALUES (007,0007,67000,'FirstEnergy Stadium');
INSERT INTO Stadiums VALUES (008,0008,72220,'NRG Stadium');

-- Insert Awards
INSERT INTO Yearly_awards VALUES (100,001,20001,0002,2021);
INSERT INTO Yearly_awards VALUES (101,002,60001,0007,2021);

INSERT INTO Yearly_awards VALUES (102,001,30001,0004,2020);
INSERT INTO Yearly_awards VALUES (103,002,70001,0007,2020);

INSERT INTO Yearly_awards VALUES (104,001,40001,0001,2019);
INSERT INTO Yearly_awards VALUES (105,002,70001,0008,2019);